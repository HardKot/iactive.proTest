{"version":3,"sources":["src/components/UserView.tsx","src/components/Content.tsx","static/icons/MessageFavourites.jsx","static/icons/MessageSend.jsx","static/icons/MessagesHide.jsx","static/icons/Options.jsx","src/models/messages.ts","src/components/MessagesToolsButtons.tsx","src/components/MessageView.tsx","src/MessegesView.tsx","App.js","webpack:///./index.js?41f5"],"names":["styles","StyleSheet","create","background","flexDirection","padding","image","width","height","borderRadius","nameBackground","marginLeft","name","fontSize","color","fontWeight","subText","textCustomIcon","backgroundColor","textAlign","textAlignVertical","paddingTop","UserView","props","user","View","style","imageURL","Image","source","uri","Text","attachments","marginVertical","Content","text","useState","isShowText","setIsShowText","flex","numberOfLines","ellipsizeMode","length","Pressable","onPress","justifyContent","alignContent","map","item","index","type","url","resizeMode","toString","Video","useNativeControls","SvgComponent","isFavorite","fill","xmlns","d","xmlnsXlink","viewBox","id","patternContentUnits","transform","xlinkHref","stroke","strokeWidth","StatusRequest","fillOpacity","WAIT","getMessages","a","async","lastMessageId","oldMessage","formData","FormData","append","fetch","method","body","result","ok","json","Messages","message","channel","author","content","undefined","dateTimeCreate","Date","parse","date","replace","Error","MessagesToolsButtons","sharingIsAvailable","setSharingIsAvailable","setIsFavorite","messageId","onPressHidden","sharingContent","useEffect","JSON","AsyncStorage","getItem","messagesIdFavorite","includes","checkMessageIdFavorite","then","Sharing","editStatusFavoriteMessage","useCallback","setItem","stringify","filter","removeMessageIdFavorite","push","sort","addMessageIdFavorite","MessageSend","MessagesHide","Options","MessagesViewStatus","borderBottomColor","borderBottomWidth","marginBottom","paddingBottom","nextButton","teg","marginHorizontal","messageBody","textBody","header","MessageView","isHidden","setIsHidden","opacityAnimated","useRef","Animated","Value","current","timing","toValue","useNativeDriver","duration","start","opacity","getHours","getMinutes","reducer","state","payload","messages","status","READY","direction","initState","LOADING","MessagesView","useReducer","dispatch","unSubscribe","onGetNewMessage","onError","console","error","work","Promise","log","res","setTimeout","subscribeGetMessages","alert","ActivityIndicator","Button","title","FlatList","data","renderItem","keyExtractor","inverted","alignItems","paddingHorizontal","messagesView","registerRootComponent"],"mappings":"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","file":"static/js/app.588a707f.chunk.js","sourcesContent":["import React from 'react'\nimport { Image, View, Text, StyleSheet } from 'react-native'\nimport type { FC } from 'react'\nimport type { ViewProps } from 'react-native'\n\ntype sizeView = 'small'\n\ninterface UserViewProps extends ViewProps {\n  user: UserType,\n}\nconst styles = StyleSheet.create({\n  background: {\n    flexDirection: 'row',\n    padding: 5\n  },\n  image: {\n    width: 36,\n    height: 36,\n    borderRadius: 18,\n  },\n  nameBackground: {\n    marginLeft: 10\n  },\n  name: {\n    fontSize: 16,\n    color: '#808080',\n    fontWeight: '400',\n  },\n  subText: {\n    fontSize: 12,\n    color: '#808080',\n    fontWeight: '400',\n  },\n  textCustomIcon: {\n    backgroundColor: 'blue',\n    color: 'white',\n    fontSize: 24,\n    fontWeight: 'bold',\n    textAlign: 'center',\n    textAlignVertical: 'center',\n    paddingTop: 3\n  }\n})\n\nconst UserView: FC<UserViewProps> = (props)=> {\n  const { user } = props\n  return (\n    <View {...props} style={styles.background}>\n      {\n        user.imageURL ? <Image source={{ uri: user.imageURL }} style={styles.image}/> :\n          <Text style={[styles.image, styles.textCustomIcon]}>{user.name[0]}</Text>\n      }\n\n      <View style={styles.nameBackground}>\n        <Text style={styles.name}>{user.name}</Text>\n        <Text style={styles.subText}>Текст поста в соц. сетях если это комментарий</Text>\n      </View>\n    </View>\n  )\n}\n\nexport default UserView\n","import React, { useState } from 'react'\nimport {View, Image, Text, StyleSheet, Button, Pressable} from 'react-native'\nimport type { FC } from 'react'\nimport type { ViewProps } from 'react-native'\nimport {Video} from \"expo-av\";\n\ninterface ContentProps extends ViewProps {\n  text?: string,\n  attachments: Array<attachmentsContent>\n}\n\nconst styles = StyleSheet.create({\n  attachments: {\n    height: 300,\n    width: 300,\n    marginVertical: 10,\n  }\n})\n\nconst Content: FC<ContentProps> = (props) => {\n  const { text, attachments } = props\n  const [isShowText, setIsShowText] = useState(false)\n  return (\n    <View {...props}>\n      {\n        text ?\n          <View style={{ flex: 1 }}>\n            <Text numberOfLines={isShowText ? 0 : 249} style={{ height: 50 }} ellipsizeMode={\"clip\"}>{text}</Text>\n            {\n              text.length <= 249 || isShowText ? null :\n                <Pressable onPress={()=>(setIsShowText(true))}>\n                  <Text style={{ color: '#808080' }}>Далее</Text>\n                </Pressable>\n            }\n          </View>\n          : null\n      }\n      {\n        attachments.length == 0 ? null :\n          <View style={{ justifyContent: 'flex-start', flexDirection: 'row', alignContent : 'center' }}>\n            {\n              attachments.map(\n                (item, index) =>\n                  item.type == 'image' ?\n                    <Image\n                      source={{ uri: item.url }}\n                      key={index.toString()}\n                      style={styles.attachments}\n                      resizeMode={'contain'}\n                    /> :\n                  item.type == 'video' ?\n                    <Video\n                      source={{ uri: item.url }}\n                      key={index.toString()}\n                      useNativeControls\n                      resizeMode={'contain'}\n                      style={styles.attachments}\n\n                    />\n                    : null)\n            }\n          </View>\n      }\n    </View>\n  )\n}\n\nexport default Content","import * as React from \"react\"\nimport Svg, { Path } from \"react-native-svg\"\n\nconst SvgComponent = (props) => {\n  const { isFavorite } = props\n  if (isFavorite) {\n    return(\n      <Svg\n        width={24}\n        height={24}\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <Path\n          d=\"M10.367 3.203 7.828 8.398l-5.742.82c-1.016.157-1.406 1.407-.664 2.15l4.101 4.023-.976 5.664c-.156 1.015.937 1.797 1.836 1.328l5.117-2.695 5.078 2.695c.899.469 1.992-.313 1.836-1.328l-.977-5.664 4.102-4.024c.742-.742.352-1.992-.664-2.148l-5.703-.82-2.578-5.196c-.43-.898-1.758-.937-2.227 0Z\"\n          fill={\"#08E\"}\n        />\n      </Svg>\n    )\n  } else {\n    return (\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n        width=\"24\"\n        height=\"24\"\n        fill=\"none\"\n        viewBox=\"0 0 24 24\"\n      >\n        <path fill=\"url(#pattern0)\" d=\"M0 0H24V24H0z\"></path>\n        <defs>\n          <pattern\n            id=\"pattern0\"\n            width=\"1\"\n            height=\"1\"\n            patternContentUnits=\"objectBoundingBox\"\n          >\n            <use transform=\"scale(.02083)\" xlinkHref=\"#image0_0_61\"></use>\n          </pattern>\n          <image\n            id=\"image0_0_61\"\n            width=\"48\"\n            height=\"48\"\n            xlinkHref=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwBAMAAAClLOS0AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAwUExURUdwTACH7gCI7gCM8wCH7gCI7gCI7gCH7gCI7gCH7QCI7wCI7gCH7gCI7gCI7gCI7tNCCjEAAAAPdFJOUwBeoQWN73XLSw4oGLo32lyg1T8AAAFqSURBVDjLY2CgL+DYgEOCPQGHxPrPOCT0P2IX5/z/HbsE2/f/C7BKsP7wV8Aq0R+8/idWifMJPN+wiXP938DxFZsEyycG5vgGLBLz/zIw5B/AIiH/gIFh/y80wVk3xJziBRgYmP6pJPZuhokmnYv/DwTfDRgYuEGM/19rNMAS+4DMNyqJl0HsGWJOdUApZUgYnUcNPGb9L8wQltF/lIgw+i8AY+Z/MUCIc9f/gLMZ/59ESCz9ihTG9//Bo5v3/2vkcIqPgvvzzwRkC6f/vwAz1Rk1WvWhocSPHvL9MAn0uPJ3gKatH2gS9dCYYPmCKs78H+oWDrQkxPsPSExsBoWvAWqa+gJy6T+gm99fQJHg+cjAW/89/tMGBn3UlG3/m9P/q4DZ/28G8qjRvj5A/r8nA8Oa/2/Xf0CRyH/+vwpEt/7XR00P+v8hscjp/x81OuO/QP3BVf8JWZz7O9yRjKEo2VIAwZ6ygWHwAgC9cIKLiqH/1gAAAABJRU5ErkJggg==\"\n          ></image>\n        </defs>\n      </svg>\n    );\n  }\n}\n\nexport default SvgComponent\n","import * as React from \"react\"\nimport Svg, { Path } from \"react-native-svg\"\n\nconst SvgComponent = (props) => (\n  <Svg\n    width={24}\n    height={24}\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    {...props}\n  >\n    <Path\n      d=\"m11.398 6.406-.312.274a.53.53 0 0 0 0 .664l4.531 4.492H3.47a.475.475 0 0 0-.469.469v.39c0 .274.195.47.469.47h12.148l-4.492 4.53a.45.45 0 0 0 0 .664l.273.274c.157.195.47.195.665 0l5.78-5.781a.45.45 0 0 0 0-.665l-5.78-5.78c-.196-.196-.508-.196-.665 0ZM20.5 5.47A.504.504 0 0 0 20.031 5h-.312a.475.475 0 0 0-.469.469V19.53c0 .274.195.469.469.469h.312a.475.475 0 0 0 .469-.469V5.47Z\"\n      fill=\"#CDCDCD\"\n    />\n    <Path\n      d=\"m11.398 6.406.083.094.008-.007.007-.009-.098-.078Zm-.312.274-.082-.094-.009.007-.007.009.098.078Zm0 .664-.098.078.005.005.005.006.088-.09Zm4.531 4.492v.125h.304l-.216-.214-.088.089Zm0 1.328.089.088.211-.213h-.3v.125Zm-4.492 4.531.088.089-.088-.089Zm.273.938.099-.079-.01-.01-.089.089Zm-.082-12.32-.312.273.164.188.313-.274-.165-.188Zm-.328.289a.654.654 0 0 0 0 .82l.196-.156a.404.404 0 0 1 0-.508l-.196-.156Zm.01.83 4.531 4.493.176-.178-4.531-4.492-.176.178Zm4.62 4.279H3.467v.25h12.15v-.25Zm-12.15 0a.6.6 0 0 0-.593.594h.25a.35.35 0 0 1 .344-.344v-.25Zm-.593.594v.39h.25v-.39h-.25Zm0 .39c0 .343.251.594.594.594v-.25a.327.327 0 0 1-.344-.344h-.25Zm.594.594h12.148v-.25H3.47v.25Zm12.06-.213-4.493 4.531.178.176 4.492-4.53-.178-.177Zm-4.492 4.53a.594.594 0 0 0-.184.421c0 .154.065.302.184.42l.176-.176a.344.344 0 0 1-.11-.244c0-.08.034-.167.11-.243l-.176-.177Zm0 .842.273.273.177-.177-.274-.273-.176.177Zm.264.263c.211.264.612.248.85.01l-.177-.177c-.152.153-.377.137-.478.01l-.195.157Zm.85.01 5.781-5.781-.177-.177-5.78 5.781.176.177Zm5.781-5.781a.594.594 0 0 0 .183-.42.593.593 0 0 0-.183-.42l-.177.176c.077.076.11.163.11.244a.345.345 0 0 1-.11.243l.177.177Zm0-.84-5.781-5.782-.177.177 5.781 5.78.177-.176Zm-5.781-5.782c-.238-.238-.639-.254-.85.01l.195.156c.101-.126.325-.142.478.01l.177-.176Zm8.474-.85a.595.595 0 0 0-.183-.41.595.595 0 0 0-.41-.183v.25c.076 0 .163.04.233.11s.11.157.11.234h.25Zm-.594-.593h-.312v.25h.312v-.25Zm-.312 0a.6.6 0 0 0-.594.594h.25a.35.35 0 0 1 .344-.344v-.25Zm-.594.594V19.53h.25V5.47h-.25Zm0 14.062c0 .343.251.594.594.594v-.25a.327.327 0 0 1-.344-.344h-.25Zm.594.594h.312v-.25h-.312v.25Zm.312 0a.6.6 0 0 0 .594-.594h-.25a.35.35 0 0 1-.344.344v.25Zm.594-.594V5.47h-.25V19.53h.25Z\"\n      fill=\"#CDCDCD\"\n    />\n  </Svg>\n)\n\nexport default SvgComponent\n","import * as React from \"react\"\nimport Svg, { Path } from \"react-native-svg\"\n\nconst SvgComponent = (props) => {\n  // if (props.isHidden) {\n  //   return (\n  //     <svg\n  //       xmlns=\"http://www.w3.org/2000/svg\"\n  //       xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n  //       width=\"24\"\n  //       height=\"24\"\n  //       fill=\"none\"\n  //       viewBox=\"0 0 24 24\"\n  //     >\n  //       <path fill=\"url(#pattern0)\" fillOpacity=\"0.2\" d=\"M0 0H24V24H0z\"></path>\n  //       <defs>\n  //         <pattern\n  //           id=\"pattern0\"\n  //           width=\"1\"\n  //           height=\"1\"\n  //           patternContentUnits=\"objectBoundingBox\"\n  //         >\n  //           <use transform=\"scale(.02083)\" xlinkHref=\"#image0_0_47\"></use>\n  //         </pattern>\n  //         <image\n  //           id=\"image0_0_47\"\n  //           width=\"48\"\n  //           height=\"48\"\n  //           xlinkHref=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwAgMAAAAqbBEUAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAMUExURUdwTAAAAAAAAAAAAAu23DQAAAADdFJOUwBpEFP+BFQAAAAzSURBVCjPY2AYBOA/FGByvoaCQTyY8wWiej4yR55szrdVYDCfgAsotodeHJSgwu2fAQYASipQ77qIzjwAAAAASUVORK5CYII=\"\n  //         ></image>\n  //       </defs>\n  //     </svg>\n  //   );\n  // }\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"18\"\n      height=\"18\"\n      fill=\"none\"\n      viewBox=\"0 0 18 18\"\n    >\n      <path\n        stroke=\"#A2A2A2\"\n        strokeWidth=\"1.25\"\n        d=\"M0.625 0.625H17.375V17.375H0.625z\"\n      ></path>\n      <path stroke=\"#A2A2A2\" strokeWidth=\"1.25\" d=\"M0 5.375L18 5.375\"></path>\n    </svg>\n  )\n};\n\nexport default SvgComponent\n","import * as React from \"react\"\nimport Svg, { Path } from \"react-native-svg\"\n\nconst SvgComponent = (props) => (\n  <Svg\n    width={24}\n    height={24}\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    {...props}\n  >\n    <Path\n      d=\"m18.828 12.219-1.25-.742c.04-.313.04-.625.04-.977 0-.313 0-.625-.04-.938l1.25-.742c.39-.195.547-.664.43-1.054a9.723 9.723 0 0 0-2.227-3.907.947.947 0 0 0-1.172-.156l-1.25.742a7.882 7.882 0 0 0-1.68-.976V2.023c0-.468-.273-.82-.702-.937a9.699 9.699 0 0 0-4.493 0c-.43.117-.703.469-.703.937V3.47a7.883 7.883 0 0 0-1.68.976l-1.25-.742a.947.947 0 0 0-1.171.156A9.724 9.724 0 0 0 .703 7.766c-.117.39.04.859.43 1.054l1.25.742c-.04.313-.04.626-.04.977 0 .313 0 .625.04.938l-1.25.742c-.39.195-.547.664-.43 1.054A9.724 9.724 0 0 0 2.93 17.18a.947.947 0 0 0 1.172.156l1.25-.742c.507.39 1.054.703 1.68.976v1.446c0 .468.273.82.702.937a9.698 9.698 0 0 0 4.493 0c.43-.117.703-.469.703-.937V17.57a7.881 7.881 0 0 0 1.68-.976l1.25.742c.39.234.859.156 1.171-.156a9.724 9.724 0 0 0 2.227-3.907c.117-.39-.04-.859-.43-1.054Zm-2.539 3.906-1.836-1.055c-1.055.938-1.406 1.133-2.773 1.64v2.071a8.274 8.274 0 0 1-1.72.196 7.904 7.904 0 0 1-1.679-.196v-2.07c-1.328-.469-1.719-.703-2.773-1.64l-1.836 1.054a9.38 9.38 0 0 1-1.719-2.969l1.836-1.015c-.273-1.407-.273-1.836 0-3.243L1.953 7.883a9.381 9.381 0 0 1 1.719-2.969L5.508 5.97c1.054-.938 1.445-1.172 2.773-1.64V2.257A8.275 8.275 0 0 1 10 2.062c.586 0 1.133.079 1.68.196v2.07c1.328.469 1.718.703 2.773 1.64l1.836-1.054a9.382 9.382 0 0 1 1.719 2.969l-1.836 1.015c.273 1.407.273 1.836 0 3.243l1.836 1.015a9.382 9.382 0 0 1-1.719 2.969ZM10 6.75c-2.07 0-3.75 1.719-3.75 3.75 0 2.07 1.68 3.75 3.75 3.75 2.031 0 3.75-1.68 3.75-3.75 0-2.031-1.719-3.75-3.75-3.75ZM10 13a2.468 2.468 0 0 1-2.5-2.5C7.5 9.133 8.594 8 10 8c1.367 0 2.5 1.133 2.5 2.5 0 1.406-1.133 2.5-2.5 2.5Z\"\n      fill=\"gray\"\n      fillOpacity={0.4}\n    />\n  </Svg>\n)\n\nexport default SvgComponent\n","import AsyncStorage from '@react-native-async-storage/async-storage'\n\nenum StatusRequest {\n  LOADING,\n  WAIT\n}\n\nlet statusRequest: StatusRequest = StatusRequest.WAIT\n\nexport function subscribeGetMessages(onGetNewMessage, onError = console.error) {\n  let work: boolean = true\n  new Promise(async()=>{\n    let lastMessageId: number\n    let messages: Array<MessageType>\n    messages = await getMessages()\n    onGetNewMessage(messages)\n    lastMessageId = messages[messages.length - 1].id\n    while (work) {\n      try {\n        console.log('Проверяю сообщения. Последний id', lastMessageId)\n        messages = await getMessages(lastMessageId)\n        if (messages.length > 0) {\n          lastMessageId = messages[0].id\n          onGetNewMessage(messages)\n        }\n      } catch (error) {\n        onError(error)\n      }\n      await new Promise(res => setTimeout(res, 5 * 1000))\n    }\n  })\n  return () => {work = false}\n}\n\n\n\nexport async function getMessages(lastMessageId:number=0, oldMessage: boolean = false): Promise<Array<MessageType>> {\n  const formData = new FormData()\n  formData.append('actionName', 'MessagesLoad')\n  formData.append('messageId', lastMessageId.toString())\n  formData.append('oldMessage', oldMessage.toString())\n  const result = await fetch('http://f0665380.xsph.ru/', {\n    method: 'POST',\n    body: formData\n  })\n  if (result.ok) {\n    const json = await result.json()\n    if (json == 'no message') {\n      return []\n    }\n    statusRequest = StatusRequest.WAIT\n    return json.Messages.map(message => ({\n      id: message.id,\n      channel: message.channel,\n      author: message.author,\n      content: message.content.length != 0 ? message.content : undefined,\n      attachments: message.attachments,\n      dateTimeCreate: new Date(Date.parse(message.date.replace(' ', 'T')))\n    }))\n  }\n  throw new Error('Server Error')\n}\n\nexport async function addMessageIdFavorite(messageId: string) {\n  const messagesIdFavorite = JSON.parse(await AsyncStorage.getItem('@MessagesIdFavorite') ?? '[]')\n  messagesIdFavorite.push(messageId)\n  await AsyncStorage.setItem('@MessagesIdFavorite', JSON.stringify(messagesIdFavorite.sort()))\n}\n\nexport async function removeMessageIdFavorite(messageId: string) {\n  const messagesIdFavorite = JSON.parse(await AsyncStorage.getItem('@MessagesIdFavorite') ?? '[]')\n  await AsyncStorage.setItem('@MessagesIdFavorite', JSON.stringify(\n    messagesIdFavorite.filter(item=> messageId != item)))\n}\n\nexport async function checkMessageIdFavorite(messageId: string) {\n  const messagesIdFavorite = JSON.parse(await AsyncStorage.getItem('@MessagesIdFavorite') ?? '[]')\n  return (messagesIdFavorite.includes(messageId))\n}","import React, {useCallback, useEffect, useState} from 'react'\nimport {View, Pressable, StyleSheet, Image} from 'react-native'\nimport * as Sharing from 'expo-sharing';\nimport MessageFavorites from '../../static/icons/MessageFavourites'\nimport MessageSend from '../../static/icons/MessageSend'\nimport MessagesHide from '../../static/icons/MessagesHide'\nimport Options from '../../static/icons/Options'\nimport type { FC } from 'react'\nimport type { ViewProps } from 'react-native'\nimport {addMessageIdFavorite, checkMessageIdFavorite, removeMessageIdFavorite} from \"../models/messages\";\n\ninterface MessagesToolsButtonsProps extends ViewProps {\n  isFavorite?: boolean\n  messageId: string\n  onPressHidden?: {(): void}\n  sharingContent?: any\n}\n\n\nconst styles = StyleSheet.create({\n  background: {\n    flexDirection: 'row'\n  }\n})\n\nconst MessagesToolsButtons: FC<MessagesToolsButtonsProps> = (props) => {\n  const [sharingIsAvailable, setSharingIsAvailable] = useState<boolean | undefined>()\n  const [isFavorite, setIsFavorite] = useState<boolean>(false)\n  const { messageId, onPressHidden, sharingContent } = props\n\n  useEffect(()=>{\n    checkMessageIdFavorite(messageId).then((result) => setIsFavorite(result))\n    Sharing.isAvailableAsync().then((result) => setSharingIsAvailable(result))\n    return ()=> {\n\n    }\n  },[setIsFavorite])\n\n  const editStatusFavoriteMessage = useCallback(()=>{\n    if (isFavorite) {\n      removeMessageIdFavorite(messageId).then(()=>setIsFavorite(false))\n    } else {\n      addMessageIdFavorite(messageId).then(()=>setIsFavorite(true))\n    }\n  }, [isFavorite])\n  if (sharingIsAvailable == undefined) {\n    return null\n  }\n  return (\n    <View style={styles.background} {...props}>\n      {\n        sharingContent && sharingIsAvailable ?\n          <Pressable /* onPress={()=> Sharing.shareAsync(sharingContent, { dialogTitle: 'Поделиться' }).catch()} */>\n            <MessageSend />\n          </Pressable>\n          : null\n      }\n      <Pressable onPress={()=> onPressHidden()}>\n        <MessagesHide />\n      </Pressable>\n      <Pressable>\n        <Options />\n      </Pressable>\n      <Pressable onPress={editStatusFavoriteMessage}>\n        <MessageFavorites isFavorite={isFavorite}/>\n      </Pressable>\n    </View>\n  )\n}\n\nexport default MessagesToolsButtons","import React, {useCallback, useRef, useState} from 'react'\nimport {Text, View, StyleSheet, Animated} from 'react-native'\nimport type { FC } from 'react'\nimport type { ViewProps } from 'react-native'\nimport UserView from \"./UserView\";\nimport Content from \"./Content\";\nimport MessagesToolsButtons from \"./MessagesToolsButtons\";\ninterface MessageProps extends ViewProps {\n  message: MessageType\n}\n\nconst styles = StyleSheet.create({\n  background: {\n    padding: 5,\n    width: '100%',\n    borderBottomColor: '#4c4c4c',\n    borderBottomWidth: 2,\n    marginBottom: 5,\n    paddingBottom: 10\n  },\n  nextButton: {\n    color: '#808080',\n    fontWeight: '400',\n    fontSize: 12,\n    marginVertical: 8,\n  },\n  teg: {\n    fontSize: 12,\n    fontWeight: '400',\n    marginHorizontal: 4\n  },\n  messageBody: {\n    flex: 1,\n    flexDirection: 'row',\n  },\n  dateTimeCreate: {\n    color: '#808080',\n    fontWeight: '400',\n    fontSize: 14,\n    marginHorizontal: 5\n  },\n  textBody: {\n    fontSize: 16,\n    fontWeight: '400',\n    color: '#3333333',\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between'\n  }\n})\n\nconst MessageView: FC<MessageProps>  = (props) => {\n  const [isHidden, setIsHidden] = useState(false)\n  const opacityAnimated = useRef(new Animated.Value(1000)).current\n  const { message } = props\n\n  const hiddenContent = () => Animated.timing(opacityAnimated, { toValue: 0, useNativeDriver: false, duration: 500 })\n    .start(() => {setIsHidden(true)})\n\n  const showContent = () => {\n    setIsHidden(false)\n    Animated.timing(opacityAnimated, { toValue: 1, useNativeDriver: false, duration: 500 }).start()\n  }\n\n  const sharingContent = () => {\n    if (message.attachments.length > 0) {\n      return message.attachments[0].url\n    }\n    return undefined\n  }\n\n  return (\n    <View\n      {...props}\n      style={[styles.background, props.style]}\n    >\n      <View style={styles.header}>\n        <UserView user={{ imageURL: undefined, name: message.author }} />\n        <MessagesToolsButtons\n          messageId={`${message.channel}_${message.id}`}\n          onPressHidden={useCallback(()=>{\n            if (isHidden) {\n              showContent()\n            } else {\n              hiddenContent()\n            }}, [isHidden])}\n          sharingContent={sharingContent()}\n        />\n      </View>\n      {\n        isHidden ? null :\n          <Animated.View style={[styles.messageBody, { opacity: opacityAnimated }]}>\n            <Text style={styles.dateTimeCreate}>\n              {message.dateTimeCreate.getHours()}:{message.dateTimeCreate.getMinutes() < 10 ? 0 : null}{message.dateTimeCreate.getMinutes()}\n            </Text>\n            <Content attachments={message.attachments} text={message.content} style={{ flex: 1 }}/>\n          </Animated.View>\n      }\n    </View>\n  )\n}\n\nexport default MessageView\n\n","import React, { useEffect, useReducer, forwardRef, useImperativeHandle } from 'react'\nimport {FlatList, View, ActivityIndicator, Button} from 'react-native'\nimport type { FC } from 'react'\nimport type { ViewProps } from 'react-native'\nimport MessageView from \"./components/MessageView\";\nimport {getMessages, subscribeGetMessages} from \"./models/messages\";\n\n\nenum MessagesViewStatus {\n  LOADING,\n  READY,\n  ERROR\n}\n\ntype Direction = 'newOld' | 'oldNew'\n\ninterface MessagesViewState {\n  messages: Array<any>\n  status: MessagesViewStatus\n  direction: Direction\n}\n\ninterface MessagesViewProps extends ViewProps {\n\n}\n\n\ntype MessagesViewAction =\n  { type: 'addMessage', payload: any } |\n  { type: 'editDirection', payload: any }\n\nfunction reducer(state: MessagesViewState, { type, payload }: MessagesViewAction): MessagesViewState {\n  switch (type) {\n    case \"addMessage\":\n      if (payload.length != 0) {\n        if (state.messages.length == 0) {\n          state.status = MessagesViewStatus.READY\n        }\n        state.messages = [...state.messages, ...payload]\n      }\n      break\n    case \"editDirection\":\n      state.direction = payload\n      break\n  }\n  return { ...state }\n}\n\nconst initState: MessagesViewState = {\n  messages: [],\n  status: MessagesViewStatus.LOADING,\n  direction: 'oldNew'\n}\n\n\nconst MessagesView: FC<MessagesViewProps> = (props) => {\n  const [state, dispatch] = useReducer(reducer, initState)\n  useEffect(()=>{\n    let unSubscribe = subscribeGetMessages(\n      (messages) => {dispatch({ type: 'addMessage', payload: messages })},\n      (error) => {alert(error)}\n    )\n    return () => {\n      unSubscribe()\n    }\n  }, [dispatch])\n\n  switch (state.status) {\n    case MessagesViewStatus.LOADING:\n      return (\n        <ActivityIndicator color={'#000000'}/>\n      )\n    case MessagesViewStatus.READY:\n      return (\n        <View {...props}>\n          <Button\n            title={state.direction == 'newOld' ? 'Сначала новые' : 'Сначала старые'}\n            onPress={() => dispatch({ type: 'editDirection', payload: state.direction == 'newOld' ? 'oldNew' : 'newOld' })}\n          />\n          <FlatList\n            data={state.messages}\n            renderItem={({ item })=>(<MessageView message={item} />)}\n            keyExtractor={(item) => (`${item.channel}_${item.id}`)}\n            inverted={state.direction == 'newOld'}\n          />\n        </View>\n      )\n  }\n}\n\nexport default MessagesView","import React from 'react';\nimport { StyleSheet, View } from 'react-native';\nimport MessagesView from './src/MessegesView'\n\nconst styles = StyleSheet.create({\n  background: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    paddingHorizontal: 50,\n    paddingTop: 30\n  },\n  messagesView:{\n    width: 900,\n  }\n})\n\nexport default function App() {\n  return (\n      <View style={styles.background}>\n        <MessagesView style={styles.messagesView} />\n      </View>\n  )\n}","import { registerRootComponent } from 'expo';\n\nimport App from './App';\n\n// registerRootComponent calls AppRegistry.registerComponent('main', () => App);\n// It also ensures that whether you load the app in Expo Go or in a native build,\n// the environment is set up appropriately\nregisterRootComponent(App);\n"],"sourceRoot":""}